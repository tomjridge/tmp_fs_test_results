# Tests for close

# close on an fd that was never used
close (FD 3)

# and again
close (FD 4)

# open a normal file, and close
open f1.txt [O_WRONLY;O_CREAT] rw-r--r--
write (FD 3) "0123456789" 10
close (FD 3)

# open a normal file, and close twice
open f2.txt [O_WRONLY;O_CREAT] rw-r--r--
close (FD 3)
close (FD 3)

# open and close a recently closed fd
open f1.txt [O_RDWR] 
close (FD 3)

open f1 [O_RDWR]
close (FD 3)


# multiple overlapping opens
open f1.txt [O_RDWR] 
open f2.txt [O_RDWR] 
close (FD 3)
open f1.txt [O_RDWR] 
close (FD 4)
close (FD 3)


# opening a directory
mkdir d1 rwxr-xr-x
open d1 [O_RDWR] 
close (FD 3)
open d1 [O_RDWR] 
close (FD 3)

# closing stdin
close (FD 0)

# FIXME we can't close stdout because we are using it to return results of tests!
# close (FD 1)

# FIXME we probably shouldn't close stderr either
# close (FD 2)

