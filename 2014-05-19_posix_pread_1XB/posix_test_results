# adhoc_pread_tests: adhoc tests to check behaviour of read in various situations
#
# initialization
OS_CALL(Pid 1,mkdir /tmp_dir_0/ 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/empty_dir1 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/empty_dir2 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir1 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir1/f1.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir1/f2.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/f2.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pwrite (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit an" 0 875)
[EBADF]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir1/d2 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pwrite (FD 3) "Lorem ipsum dolor sit a" 0 23)
[EBADF]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir1/d2/f4.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f4.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pwrite (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse " 0 2978)
[EBADF]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir1/d2/d3 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir1/d2/d4 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir2 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir2/f1.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir2/f2.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir2/f2.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pwrite (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidat" 0 367)
[EBADF]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir2/d2 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir2/d2/f3.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open_close /tmp_dir_0/d1/nonempty_dir2/d2/f4.txt [O_RDWR;O_CREAT] 0o000)
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir2/d2/f4.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pwrite (FD 3) "Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis" 0 4177)
[EBADF]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir2/d2/d3 0o000)
None1
OS_CALL(Pid 1,mkdir /tmp_dir_0/d1/nonempty_dir2/d2/d4 0o000)
None1
#
#
# the read tests
#
#
# read on an empty file
#
# read 0
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/f1.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 0 0)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read 1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/f1.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 1 0)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read beyond end
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/f1.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 1 100)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read negative
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/f1.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 1 -100)
[EFAULT]
OS_CALL(Pid 1,close (FD 3))
None1
# check the size of the file
OS_CALL(Pid 1,stat /tmp_dir_0/d1/nonempty_dir1/f1.txt)
{
  st_ino=1986451;
  st_kind=S_IFREG;
  st_nlink=1;
  st_size=0
}
#
#
# read on a nonempty file
#
# f3.txt is 23 bytes long
# read 0
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 0 0)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read at end
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 1 23)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read beyond end
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 1 100)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read over end
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 5 20)
Bytes1()
OS_CALL(Pid 1,close (FD 3))
None1
# read negative
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 0 -100)
[EFAULT]
OS_CALL(Pid 1,pread (FD 3) 1 -100)
[EFAULT]
OS_CALL(Pid 1,close (FD 3))
None1
# check size of file
OS_CALL(Pid 1,stat /tmp_dir_0/d1/nonempty_dir1/d2/f3.txt)
{
  st_ino=1986454;
  st_kind=S_IFREG;
  st_nlink=1;
  st_size=0
}
#
#
# read on a directory
# 
OS_CALL(Pid 1,open /tmp_dir_0/d1/empty_dir1 [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 0 0)
[EISDIR]
OS_CALL(Pid 1,pread (FD 3) 1 0)
[EISDIR]
OS_CALL(Pid 1,pread (FD 3) 1 1)
[EISDIR]
OS_CALL(Pid 1,close (FD 3))
None1
OS_CALL(Pid 1,open /tmp_dir_0/d1/nonempty_dir1 [O_RDONLY])
Int1(3)
OS_CALL(Pid 1,pread (FD 3) 0 0)
[EISDIR]
OS_CALL(Pid 1,pread (FD 3) 1 0)
[EISDIR]
OS_CALL(Pid 1,pread (FD 3) 1 1)
[EISDIR]
OS_CALL(Pid 1,close (FD 3))
None1
dump
/tmp_dir_0|D
/tmp_dir_0/d1|D
/tmp_dir_0/d1/empty_dir1|D
/tmp_dir_0/d1/empty_dir2|D
/tmp_dir_0/d1/nonempty_dir1|D
/tmp_dir_0/d1/nonempty_dir2|D
/tmp_dir_0/d1/nonempty_dir1/d2|D
/tmp_dir_0/d1/nonempty_dir1/f1.txt|F|1|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir1/f2.txt|F|2|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir1/d2/d3|D
/tmp_dir_0/d1/nonempty_dir1/d2/d4|D
/tmp_dir_0/d1/nonempty_dir1/d2/f3.txt|F|3|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir1/d2/f4.txt|F|4|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir2/d2|D
/tmp_dir_0/d1/nonempty_dir2/f1.txt|F|5|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir2/f2.txt|F|6|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir2/d2/d3|D
/tmp_dir_0/d1/nonempty_dir2/d2/d4|D
/tmp_dir_0/d1/nonempty_dir2/d2/f3.txt|F|7|0|da39a3ee5e6b4b0d3255bfef95601890afd80709
/tmp_dir_0/d1/nonempty_dir2/d2/f4.txt|F|8|0|da39a3ee5e6b4b0d3255bfef95601890afd80709

